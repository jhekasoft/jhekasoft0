<ul class="nav_block_main_menu">
    <?php $pageCount = count($this->container); ?>
    <?php $i = 0; ?>
    <?php foreach ($this->container as $page) { ?>
        <?php
            $i++;
            // render li tag and page
            $liClasses = array();
            // Is page active?
            if ($page->isActive()) {
                $liClasses[] = 'active';
            }
            if ($i == $pageCount) {
                $liClasses[] = 'last';
            }
            $liClass = empty($liClasses) ? '' : ' class="' . implode(' ', $liClasses) . '"';
        ?>
        <li<?php echo $liClass; ?>><?php echo $this->navigation()->menu()->htmlify($page); ?></li><?php echo PHP_EOL; ?>
    <?php } ?>
    <li class="nav_block_main_menu_end">
        <span>&nbsp;</span>
    </li>
</ul>
